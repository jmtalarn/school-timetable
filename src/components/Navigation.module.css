/* ===== Wrapper & desktop base ===== */
.wrapper {
	position: relative;
	display: flex;
	align-items: center;
	justify-content: center;
}

.nav {
	margin-left: auto;
	min-width: 0;
	display: flex;
	gap: 8px;
	align-items: center;
	justify-content: flex-start;
	overflow-x: auto; /* desktop: horizontal scroll for chips */
	overflow-y: hidden;
	-webkit-overflow-scrolling: touch;
	scrollbar-width: none; /* Firefox hide (desktop) */
}
.nav::-webkit-scrollbar {
	display: none;
} /* WebKit hide (desktop) */

/* Chip links */
.link {
	padding: 8px 10px;
	border-radius: 10px;
	color: var(--muted);
	text-decoration: none;
	transition: color 120ms ease, background-color 120ms ease,
		border-color 120ms ease, transform 80ms ease, box-shadow 120ms ease;
	white-space: nowrap;
	flex: 0 0 auto;
}
.link:hover {
	color: var(--text);
	background: rgba(16, 185, 129, 0.08);
	border-color: var(--border);
	transform: translateY(-1px);
}
.linkActive {
	color: var(--text);
	background: rgba(16, 185, 129, 0.14);
	border-color: rgba(16, 185, 129, 0.35);
}

/* Mobile toggle (hidden on wide screens) */
.toggle {
	display: none;
	align-items: center;
	justify-content: center;
	border: 1px solid var(--border, #e5e7eb);
	background: #fff;
	border-radius: 10px;
	padding: 6px 8px;
	cursor: pointer;
	transition: transform 80ms ease, box-shadow 120ms ease;
}
.toggle:hover {
	transform: translateY(-1px);
	box-shadow: 0 6px 16px rgba(15, 23, 42, 0.08);
}

/* ===== Small screens: collapsible panel ===== */
@media (max-width: 860px) {
	.wrapper {
		justify-content: flex-end;
	}
	.toggle {
		display: inline-flex;
	}

	/* Collapsed panel */
	.nav {
		position: absolute;
		right: 0;
		top: calc(100% + 6px);
		width: min(92vw, 560px);

		display: flex;
		flex-direction: column;
		align-items: stretch;
		gap: 6px;

		max-height: 0;
		padding: 0;
		opacity: 0;

		overflow: hidden; /* collapsed = no scroll */
		transition: max-height 180ms ease, padding 140ms ease,
			opacity 140ms ease;

		background: var(
			--bg,
			white
		); /*var(--panel, rgba(255, 255, 255, 0.92));*/
		border: 1px solid var(--border, #e5e7eb);
		border-radius: 12px;
		box-shadow: 0 10px 24px rgba(15, 23, 42, 0.12);
		z-index: 40;
	}

	/* Open panel */
	.open {
		/* Use either of these:
       max-height: 75vh;
       OR keep it within viewport minus header:
       max-height: calc(100vh - 64px - 16px);
    */
		max-height: 75vh;
		padding: 8px;
		opacity: 1;

		overflow-y: auto; /* enable vertical scroll */
		overflow-x: hidden;
		-webkit-overflow-scrolling: touch; /* smooth iOS scrolling */
		overscroll-behavior: contain; /* avoid body scroll chaining */

		scrollbar-width: thin; /* Firefox show */
	}

	/* Re-enable scrollbars for WebKit when open */
	.nav.open::-webkit-scrollbar {
		width: 8px;
		height: 8px;
		display: initial;
	}
	.nav.open::-webkit-scrollbar-thumb {
		background: rgba(0, 0, 0, 0.25);
		border-radius: 8px;
	}

	/* Full-width items inside the panel */
	.link {
		display: block;
		text-align: left;
	}
}

/* a11y helper */
.srOnly {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;
}
